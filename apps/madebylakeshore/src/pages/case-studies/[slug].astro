---
import BaseLayout from '../../layouts/BaseLayout.astro';

// Define all your case studies here (or import from a shared data file)
const caseStudies = [
  {
    slug: 'techstart-brand',
    title: 'Transforming Brand Identity for a Tech Startup',
    client: 'TechStart Inc.',
    category: 'design' as const,
    author: 'Sarah',
    duration: '8 weeks',
    year: '2024',
    heroImage: '/images/case-1.jpg',
    excerpt: 'How we helped a growing tech company evolve from a generic look to a distinctive brand that attracts top talent and enterprise clients.',
    results: [
      { value: '340%', label: 'Increase in job applications' },
      { value: '85%', label: 'Brand recognition improvement' },
      { value: '2.5x', label: 'Website engagement' },
    ],
    challenge: `
      TechStart had grown rapidly from a 5-person startup to a 50-person company, but their brand hadn't kept pace. 
      They were losing enterprise deals to competitors who "looked more established" and struggling to attract 
      senior talent who perceived them as too scrappy.
      
      Their existing brand was a DIY logo from their founding days, inconsistent colors across materials, 
      and no clear visual language. They needed to look like the serious player they had become—without 
      losing the innovative spirit that made them successful.
    `,
    approach: `
      We started with a deep discovery phase, interviewing leadership, employees, customers, and even 
      prospects who had chosen competitors. This revealed that TechStart's real differentiator wasn't 
      their technology—it was their collaborative approach to client relationships.
      
      Armed with this insight, we developed a brand strategy centered on "Partnership Through Innovation." 
      The visual identity needed to feel approachable yet sophisticated, technical yet human.
      
      We explored multiple creative directions before landing on a system that used geometric shapes 
      (representing their technical foundation) arranged in organic, flowing patterns (representing 
      their collaborative nature).
    `,
    solution: `
      The final deliverables included:
      
      • A new logomark and wordmark with flexible usage guidelines
      • A comprehensive color system with primary, secondary, and accent palettes
      • Custom typography pairing a modern sans-serif with a friendly geometric font
      • An illustration style using the geometric/organic pattern system
      • Templates for presentations, documents, and social media
      • Brand guidelines documentation for internal teams and vendors
      • Website design direction and key page mockups
    `,
    testimonial: {
      quote: "The new brand has completely changed how prospects perceive us. We went from explaining who we are to having people already trust us before the first meeting.",
      author: 'Jessica Chen',
      title: 'CEO, TechStart Inc.',
    },
    gallery: [
      '/images/case-1-gallery-1.jpg',
      '/images/case-1-gallery-2.jpg',
      '/images/case-1-gallery-3.jpg',
    ],
  },
  {
    slug: 'logistics-dashboard',
    title: 'Building a Real-Time Operations Dashboard',
    client: 'Global Logistics Co.',
    category: 'data' as const,
    author: 'Michael',
    duration: '6 weeks',
    year: '2024',
    heroImage: '/images/case-2.jpg',
    excerpt: 'Creating a Power BI dashboard that gave leadership instant visibility into operations across 12 regions, replacing 15 different spreadsheets.',
    results: [
      { value: '90%', label: 'Reduction in reporting time' },
      { value: '15→1', label: 'Data sources consolidated' },
      { value: '$2.1M', label: 'Annual savings identified' },
    ],
    challenge: `
      Global Logistics operated across 12 regions, each with their own reporting spreadsheets, formats, 
      and update schedules. Leadership spent the first week of every month just trying to compile a 
      coherent picture of operations.
      
      By the time reports were ready, the data was already stale. Decisions were made on gut feel 
      rather than current information. Regional managers spent hours on reporting instead of managing.
    `,
    approach: `
      We began by mapping all existing data sources—15 spreadsheets, 3 legacy systems, and 2 cloud 
      applications. We identified the key metrics that actually drove decisions versus the "nice to have" 
      data that cluttered existing reports.
      
      Working closely with regional managers and executives, we designed a dashboard hierarchy: 
      executive overview, regional deep-dives, and operational details. Each level answered different 
      questions at different frequencies.
    `,
    solution: `
      We built a Power BI solution that:
      
      • Automatically pulls data from all 15 sources via scheduled refreshes
      • Provides real-time visibility with data no more than 4 hours old
      • Offers drill-down from company-wide KPIs to individual shipment details
      • Includes anomaly detection that flags issues before they become problems
      • Works on desktop and mobile for on-the-go access
      • Features role-based views so each user sees relevant information
      
      We also created a data dictionary and trained the team on self-service analytics.
    `,
    testimonial: {
      quote: "For the first time in our company's history, I can see exactly what's happening across all regions in real-time. We've already caught issues that would have cost us hundreds of thousands.",
      author: 'Robert Martinez',
      title: 'COO, Global Logistics Co.',
    },
    gallery: [
      '/images/case-2-gallery-1.jpg',
      '/images/case-2-gallery-2.jpg',
      '/images/case-2-gallery-3.jpg',
    ],
  },
  {
    slug: 'finance-ai',
    title: 'Automating Financial Reports with AI',
    client: 'FinanceFirst',
    category: 'ai' as const,
    author: 'Michael',
    duration: '10 weeks',
    year: '2024',
    heroImage: '/images/case-3.jpg',
    excerpt: 'Implementing an AI-powered system that automated monthly report generation, freeing the finance team to focus on analysis instead of compilation.',
    results: [
      { value: '40→4', label: 'Hours per month saved' },
      { value: '99.9%', label: 'Accuracy rate' },
      { value: '3 days', label: 'Faster delivery' },
    ],
    challenge: `
      FinanceFirst's monthly reporting process was a marathon. The finance team spent 40+ hours 
      compiling data from multiple systems, formatting reports, writing commentary, and checking 
      for errors. It was tedious, error-prone, and kept talented analysts doing data entry instead 
      of analysis.
      
      The reports themselves were valuable—board members and executives relied on them—but the 
      process of creating them was unsustainable as the company grew.
    `,
    approach: `
      We analyzed the existing reporting workflow step by step, identifying which tasks were 
      rule-based (and thus automatable) versus which required human judgment. Surprisingly, 
      about 80% of the work was mechanical.
      
      We designed an AI-assisted system that would handle data extraction, transformation, 
      initial commentary drafting, and formatting—while keeping humans in the loop for 
      validation and strategic insights.
    `,
    solution: `
      The solution combined several technologies:
      
      • Automated data pipelines pulling from accounting, CRM, and operational systems
      • SQL-based transformations ensuring data consistency and accuracy
      • AI-generated first drafts of commentary sections based on variance analysis
      • Templated report generation with consistent formatting
      • Human review workflow with easy editing and approval
      • Audit trail tracking all automated and manual changes
      
      The finance team now reviews and refines reports instead of building them from scratch.
    `,
    testimonial: {
      quote: "Our team went from dreading month-end to actually having time for strategic analysis. The AI drafts are surprisingly good—we usually just tweak them rather than rewrite.",
      author: 'Amanda Foster',
      title: 'CFO, FinanceFirst',
    },
    gallery: [
      '/images/case-3-gallery-1.jpg',
      '/images/case-3-gallery-2.jpg',
      '/images/case-3-gallery-3.jpg',
    ],
  },
];

export function getStaticPaths() {
  return caseStudies.map((study) => ({
    params: { slug: study.slug },
    props: { study },
  }));
}

const { study } = Astro.props;

const categoryColors = {
  design: 'bg-mbl-warm/10 text-mbl-warm',
  data: 'bg-mbl-accent/10 text-mbl-accent',
  ai: 'bg-purple-100 text-purple-600',
};

// Find next case study for navigation
const currentIndex = caseStudies.findIndex(s => s.slug === study.slug);
const nextStudy = caseStudies[(currentIndex + 1) % caseStudies.length];
---

<BaseLayout 
  title={study.title}
  description={study.excerpt}
>
  <!-- Hero -->
  <section class="section-spacing">
    <div class="container-wide">
      <div class="max-w-4xl">
        <a href="/case-studies" class="inline-flex items-center gap-2 text-sm text-mbl-stone hover:text-mbl-ink mb-8 transition-colors">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          All Case Studies
        </a>
        
        <div class="flex flex-wrap items-center gap-4 mb-6">
          <span class={`px-3 py-1 rounded-full text-sm font-heading font-medium ${categoryColors[study.category]}`}>
            {study.category.charAt(0).toUpperCase() + study.category.slice(1)}
          </span>
          <span class="text-mbl-stone">{study.client}</span>
          <span class="text-mbl-mist">•</span>
          <span class="text-mbl-stone">{study.duration}</span>
          <span class="text-mbl-mist">•</span>
          <span class="text-mbl-stone">with {study.author}</span>
        </div>
        
        <h1 class="text-display-lg mb-6">{study.title}</h1>
        
        <p class="text-xl text-mbl-stone leading-relaxed">
          {study.excerpt}
        </p>
      </div>
    </div>
  </section>

  <!-- Hero Image -->
  <section class="pb-20">
    <div class="container-wide">
      <div class="aspect-[21/9] bg-gradient-to-br from-mbl-slate to-mbl-ink rounded-lg overflow-hidden">
        <!-- Replace with actual image -->
        <!-- <img src={study.heroImage} alt={study.title} class="w-full h-full object-cover" /> -->
      </div>
    </div>
  </section>

  <!-- Results -->
  <section class="pb-20">
    <div class="container-wide">
      <div class="bg-mbl-cloud rounded-lg p-8 md:p-12">
        <h2 class="font-heading text-sm uppercase tracking-wider text-mbl-stone mb-8">Key Results</h2>
        <div class="grid md:grid-cols-3 gap-8">
          {study.results.map((result) => (
            <div class="text-center md:text-left">
              <div class="text-4xl md:text-5xl font-display text-mbl-accent mb-2">
                {result.value}
              </div>
              <div class="text-mbl-stone">
                {result.label}
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Content -->
  <section class="pb-20">
    <div class="container-wide">
      <div class="grid lg:grid-cols-12 gap-16">
        <!-- Main Content -->
        <div class="lg:col-span-8">
          <div class="prose prose-lg max-w-none">
            <h2 class="text-display text-2xl mb-6">The Challenge</h2>
            <div class="text-mbl-stone leading-relaxed whitespace-pre-line mb-12">
              {study.challenge}
            </div>
            
            <h2 class="text-display text-2xl mb-6">Our Approach</h2>
            <div class="text-mbl-stone leading-relaxed whitespace-pre-line mb-12">
              {study.approach}
            </div>
            
            <h2 class="text-display text-2xl mb-6">The Solution</h2>
            <div class="text-mbl-stone leading-relaxed whitespace-pre-line mb-12">
              {study.solution}
            </div>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="lg:col-span-4">
          <div class="sticky top-24 space-y-8">
            <!-- Project Info -->
            <div class="bg-white border border-mbl-mist/50 rounded-lg p-6">
              <h3 class="font-heading font-semibold text-sm uppercase tracking-wider text-mbl-stone mb-4">Project Details</h3>
              <dl class="space-y-4">
                <div>
                  <dt class="text-sm text-mbl-stone/70">Client</dt>
                  <dd class="font-heading font-medium">{study.client}</dd>
                </div>
                <div>
                  <dt class="text-sm text-mbl-stone/70">Timeline</dt>
                  <dd class="font-heading font-medium">{study.duration}</dd>
                </div>
                <div>
                  <dt class="text-sm text-mbl-stone/70">Year</dt>
                  <dd class="font-heading font-medium">{study.year}</dd>
                </div>
                <div>
                  <dt class="text-sm text-mbl-stone/70">Lead</dt>
                  <dd class="font-heading font-medium">{study.author}</dd>
                </div>
                <div>
                  <dt class="text-sm text-mbl-stone/70">Service</dt>
                  <dd>
                    <span class={`inline-block px-2 py-1 rounded text-sm ${categoryColors[study.category]}`}>
                      {study.category.charAt(0).toUpperCase() + study.category.slice(1)}
                    </span>
                  </dd>
                </div>
              </dl>
            </div>
            
            <!-- CTA -->
            <div class="bg-mbl-ink rounded-lg p-6 text-white">
              <h3 class="font-display text-lg mb-2">Need similar results?</h3>
              <p class="text-mbl-mist/80 text-sm mb-4">Let's discuss how we can help your business.</p>
              <a href="/contact" class="inline-flex items-center gap-2 text-sm font-heading font-medium text-mbl-accent hover:text-white transition-colors">
                Get in touch
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonial -->
  {study.testimonial && (
    <section class="section-spacing bg-white">
      <div class="container-narrow text-center">
        <svg class="w-12 h-12 text-mbl-mist mx-auto mb-8" fill="currentColor" viewBox="0 0 24 24">
          <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
        </svg>
        <blockquote class="text-2xl md:text-3xl font-display text-mbl-ink leading-relaxed mb-8">
          "{study.testimonial.quote}"
        </blockquote>
        <div>
          <p class="font-heading font-semibold text-mbl-ink">{study.testimonial.author}</p>
          <p class="text-mbl-stone">{study.testimonial.title}</p>
        </div>
      </div>
    </section>
  )}

  <!-- Next Case Study -->
  <section class="section-spacing bg-mbl-cloud">
    <div class="container-wide">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
        <div>
          <p class="text-sm text-mbl-stone mb-2">Next Case Study</p>
          <h3 class="font-display text-2xl">{nextStudy.title}</h3>
          <p class="text-mbl-stone">{nextStudy.client}</p>
        </div>
        <a href={`/case-studies/${nextStudy.slug}`} class="btn-primary">
          Read Case Study
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>